<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Añadir atributos al radio button para cargar el botón Culqi -->
    <template id="payment_culqi.method_form" inherit_id="payment.method_form">
        <xpath expr="//input[@name='o_payment_radio']" position="attributes">
            <attribute name="t-att-data-provider-code">provider_sudo.code</attribute>
            <attribute name="t-att-data-culqi-inline-form-values">
                provider_sudo and provider_sudo.code == 'culqi' and {
                    'provider_id': provider_sudo.id,
                    'public_key': provider_sudo.culqi_public_key,
                } or {}
            </attribute>
        </xpath>
    </template>

    <!-- Botón Culqi en el contenedor del formulario -->
    <template id="payment_submit_button_inherit_culqi" inherit_id="payment.submit_button">
        <xpath expr="//button[@name='o_payment_submit_button']" position="before">
            <div id="o_culqi_button_container" class="d-none" data-is-culqi="true">
                <div id="o_culqi_checkout_placeholder"/>
            </div>
            <div id="o_culqi_loading" class="d-flex justify-content-center d-none">
                <div class="spinner-border"/>
            </div>
        </xpath>
    </template>

</odoo>
